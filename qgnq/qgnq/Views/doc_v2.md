# Summary

本文档是农情速报系统的rest接口文档。提供了所有可用接口的概览及详细信息。主要为公司内部前台（web、client、mobile）开发提供数据接口。

接口主要分为两类：行政区划图形接口（Maps Api）和数据产品接口。
其中根据产品形式的不同，数据产品接口又分为分布数据和统计数据。带有分布数据的产品采用单独的接口返回分布图形，一般为以下形式 host/api/v2/产品类型/geom?param

# Response

## Maps Api Response

**响应示例**

```js

{
    status : 响应状态（true||false）
    msg : 消息
    data : geojson
}

//其中geojson中会包含"code"属性，标识行政区划代码

```

## Statistics Api Response

**响应示例**

```js

{
    status : 响应状态（true||false）
    msg : 消息
    data : {
        "type":"产品类型",
        "unit":"数据单位",
        "series":[
            {
                "date":"时间yyyy-MM-dd",
                "prod":[
                    {
                        "date":"时间yyyy-MM-dd",
                        "code":"区划代码",
                        "value":"产品数据值，两位小数",
                        "change":"变化率，百分整数"
                    },  
                    {
                        ...
                    },
                    ...
                ]
            },
            {
                "date":"时间yyyy-MM-dd",
			    "prod":[{...},{...}]
            },
            ...
        ]
    }
}

```

## Distribution Api Response

**响应示例**

```js

{
    status : 响应状态（true||false）
    msg : 消息
    data : geojson
}

//其中geojson中会包含"value"属性，标识数据类别，需要根据次属性值渲染图形。

```


# Maps Api

**接口描述**

获取国家、省、市、县四级行政区划矢量。返回数据为标准geojson格式

**请求地址**

```
api：get host/api/v2/maps
```

**参数描述**

| 参数名称 | 参数描述 | 取值范围 |
| - | - | - |
| level | 请求的区划级别 | 0：国家级；1：省级，2：市级，3：县级 |
| prov | 请求的省编号，请求某省的省市县数据时使用 | 省级行政区编码范围 |
| city | 请求的市编号，请求某市的市县级数据时使用 | 市级行政区编码范围 |
| county | 请求的县编号，请求某县的县级数据时使用 | 市级行政区编码范围 |

**请求示例**

``` js
/*****************************************************************
 * 全国范围
 ******************************************************************/

//获取全国边界：get host/api/v2/maps?level=0

获取全国省级区划：get host/api/v2/maps?level=1    //全国系统

//获取全国市级区划：get host/api/v2/maps?level=2

//获取全国县级区划：get host/api/v2/maps?level=3

/*****************************************************************
 * 省级范围
 ******************************************************************/

//获取某省边界：get host/api/v2/maps?level=1?prov=0

获取某省的市级区划：get host/api/v2/maps?level=2?prov=0    //全国&省级系统

获取某省的县级区划：get host/api/v2/maps?level=3?prov=0    //全国系统

/*****************************************************************
 * 市级范围
 ******************************************************************/

//获取某市边界：get host/api/v2/maps?level=2?city=0

获取某市的县级区划：get host/api/v2/maps?level=3?city=0    //省级系统

/*****************************************************************
 * 县级范围
 ******************************************************************/

//获取某县边界：get host/api/v2/maps?level=3?county=0

```


#  Yield Api

**接口描述**

获取省、市、县、产量数据

**请求地址**

```
api：get host/api/v2/yields
```

**参数描述**

| 参数名称 | 参数描述 | 取值范围 |
| - | - | - |
| level | 请求的区划级别 | 0：国家级；1：省级，2：市级，3：县级 |
| prov | 请求的省编号，请求某省的省市县数据时使用 | 省级行政区编码范围 |
| city | 请求的市编号，请求某市的市县级数据时使用 | 市级行政区编码范围 |
| county | 请求的县编号，请求某县的县级数据时使用 | 市级行政区编码范围 |
| crop | 产品类型编号 | 0：小麦；1：玉米；2：水稻；3：棉花；4：大豆；|
| limit | 单次请求的数据条数 | 无限制 |
| offset | 数据偏移量 | 即从第几期数据开始取 |

**请求示例**

```js

/*****************************************************************
 * 全国范围
 ******************************************************************/

获取全国所有省级产量：get host/api/v2/yields?level=1?crop=0?limit=0?offset=0    //全国系统

//获取全国所有市级产量：get host/api/v2/yields?level=2?crop=0?limit=0?offset=0

//获取全国所有县级产量：get host/api/v2/yields?level=3?crop=0?limit=0?offset=0

/*****************************************************************
 * 省级范围
 ******************************************************************/

获取某省的所有市级产量：get host/api/v2/yields?level=2?prov=0?crop=0?limit=0?offset=0    //全国&省级系统

获取某省的所有县级产量：get host/api/v2/yields?level=3?prov=0?crop=0?limit=0?offset=0    //省级系统

/*****************************************************************
 * 市级范围
 ******************************************************************/

获取某市的所有县级产量：get host/api/v2/yields?level=3?city=0?crop=0?limit=0?offset=0    //全国系统

*********************************************

```


# Growth Api

**接口描述**

获取省、市、县、长势数据

**请求地址**

```
api：get host/api/v2/growths
```

**参数描述**

| 参数名称 | 参数描述 | 取值范围 |
| - | - | - |
| level | 请求的区划级别 | 0：国家级；1：省级，2：市级，3：县级 |
| prov | 请求的省编号，请求某省的省市县数据时使用 | 省级行政区编码范围 |
| city | 请求的市编号，请求某市的市县级数据时使用 | 市级行政区编码范围 |
| county | 请求的县编号，请求某县的县级数据时使用 | 市级行政区编码范围 |
| crop_type | 产品类型编号 | 0：小麦；1：玉米；2：水稻；3：棉花；4：大豆；|
| limit | 单次请求的数据条数 | 无限制 |
| offset | 数据偏移量 | 即从第几期数据开始取 |

**请求示例**

```js

/*****************************************************************
 * 全国范围
 ******************************************************************/

获取全国长势分布矢量：get host/api/v2/growths/geom?level=0?crop=0?limit=0?offset=0    //全国系统

获取全国所有省级长势数据：get host/api/v2/growths?level=1?crop=0?limit=0?offset=0    //全国系统

//获取全国所有市级长势数据：get host/api/v2/growths?level=2?crop_type=0?limit=0?offset=0

//获取全国所有县级长势数据：get host/api/v2/growths?level=3?crop_type=0?limit=0?offset=0

/*****************************************************************
 * 省级范围
 ******************************************************************/

获取某省的长势分布矢量：get host/api/v2/growths/geom?level=1?prov=0?crop=0?limit=0?offset=0    //省级系统

获取某省的所有市级长势数据：get host/api/v2/growths?level=2?prov=0?crop=0?limit=0?offset=0    //全国&省级系统

获取某省的所有县级长势数据：get host/api/v2/growths?level=3?prov=0?crop=0?limit=0?offset=0    //省级系统

/*****************************************************************
 * 市级范围
 ******************************************************************/

获取某市的所有县级长势数据：get host/api/v2/growths?level=3?city=0?crop=0?limit=0?offset=0    //全国系统

*********************************************

```

# Area Api

**接口描述**

获取省、市、县、面积数据

**请求地址**

```
api：get host/api/v2/areas
```

**参数描述**

| 参数名称 | 参数描述 | 取值范围 |
| - | - | - |
| level | 请求的区划级别 | 0：国家级；1：省级，2：市级，3：县级 |
| prov | 请求的省编号，请求某省的省市县数据时使用 | 省级行政区编码范围 |
| city | 请求的市编号，请求某市的市县级数据时使用 | 市级行政区编码范围 |
| county | 请求的县编号，请求某县的县级数据时使用 | 市级行政区编码范围 |
| crop_type | 产品类型编号 | 0：小麦；1：玉米；2：水稻；3：棉花；4：大豆；|
| limit | 单次请求的数据条数 | 无限制 |
| offset | 数据偏移量 | 即从第几期数据开始取 |

**请求示例**

```js

/*****************************************************************
 * 全国范围
 ******************************************************************/

获取全国所有省级面积数据：get host/api/v2/areas?level=1?crop=0?limit=0?offset=0    //全国系统

//获取全国所有市级面积数据：get host/api/v2/growths?level=2?crop_type=0?limit=0?offset=0

//获取全国所有县级面积数据：get host/api/v2/growths?level=3?crop_type=0?limit=0?offset=0

/*****************************************************************
 * 省级范围
 ******************************************************************/

获取某省的所有市级面积数据：get host/api/v2/areas?level=2?prov=0?crop=0?limit=0?offset=0    //全国&省级系统

获取某省的所有县级面积数据：get host/api/v2/areas?level=3?prov=0?crop=0?limit=0?offset=0    //省级系统

/*****************************************************************
 * 市级范围
 ******************************************************************/

获取某市的所有县级面积数据：get host/api/v2/areas?level=3?city=0?crop=0?limit=0?offset=0    //全国系统

*********************************************

```

# Other Apis

后续提供